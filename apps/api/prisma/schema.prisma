generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Message {
  id   Int    @id @default(autoincrement())
  text String
}

model ContentBlock {
  id        Int      @id @default(autoincrement())
  slug      String   @unique   // e.g. 'program', 'contacts', 'praktisk'
  title     String
  data      Json
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())
}

model Post {
  id        Int      @id @default(autoincrement())
  text      String   @db.VarChar(280)
  createdAt DateTime @default(now())
}

model Location {
  id          Int      @id @default(autoincrement())
  slug        String   @unique
  title       String
  description String?

  kind        LocationKind @default(VENUE)

  latitude    Decimal  @db.Decimal(9, 6)  // 62.123
  longitude   Decimal  @db.Decimal(9, 6)  // 6.321

  address     String?
  city        String?
  url         String?   // maps/website

  emoji       String?   @db.VarChar(8)    // "‚õ™Ô∏è", "üè®", "üéâ"
  sortOrder   Int       @default(0)

  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}

enum LocationKind {
  HOTEL
  CEREMONY
  PARTY
  HOME
  VENUE
  OTHER
}

model Person {
  id              String      @id @default(uuid())
  firstName       String
  lastName        String
  email           String
  phone           String?
  invitationCode  String?
  addressLine1    String?
  zipcode         String?
  city            String?
  country         String?
  title           String      @default("Guest")
  roles           PersonRole[]
  rsvp            RsvpStatus @default(NO)
  saveTheDateSent Boolean     @default(false)
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
}

enum PersonRole {
  GUEST
  TOASTMASTER
  PERSON_OF_HONOR
  VENDOR
  GROOM
  BRIDE
}

enum RsvpStatus {
  YES
  NO
}
